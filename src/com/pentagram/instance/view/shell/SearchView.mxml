<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 xmlns:components="org.flashcommander.components.*">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			protected function searchInput_enterHandler(event:FlexEvent):void
			{
				this.currentState = "notfound";
			}
			[Embed(source='/assets/library.swf#bigQuestion')]
			[Bindable] private var bigQuestion:Class;
			
			private function returnToSeach():void {
				this.currentState = "search";
			}
			private function handleNewClient():void {
				//trigger new window
			}
			private function handleInputSelect():void {
				
			}
			
		]]>
	</fx:Script>
	<s:states>
		<s:State name="search" />
		<s:State name="notfound" />
	</s:states>
	<s:transitions>
		<s:Transition fromState="search" toState="notfound">
			<s:Sequence>
				<s:Resize  target="{redCircle}" duration="400" easer="{easeOutExpo}" />		
				<s:Fade targets="{[questionMark,errorMessageHolder]}" duration="400" easer="{easeOutExpo2}"/>						
			</s:Sequence>
		</s:Transition> 
		<s:Transition fromState="notfound" toState="search">
			<s:Sequence>
				<s:Resize  target="{redCircle}" duration="400" easer="{easeOutExpo}" />
				<s:Fade target="{searchInput}" duration="400" easer="{easeOutExpo2}"/>
			</s:Sequence>
		</s:Transition>
	</s:transitions>
	
	<s:Group width="450" height="450"  verticalCenter="0" horizontalCenter="0">
		<s:BitmapImage id="questionMark" y="50" horizontalCenter="10" verticalCenter="-180" alpha="0" alpha.notfound="1" source="{bigQuestion}" includeIn="notfound" />
		<s:Ellipse width="100%" height="100%" width.notfound="{450*.15}" height.notfound="{450*.15}"
		id="redCircle" horizontalCenter="0" verticalCenter="0">
			<s:fill>
				<s:LinearGradient>
					<s:GradientEntry color="0x763735" ratio="0" alpha="1" />
					<s:GradientEntry color="0xBF3534" ratio="1" alpha="1" />
				</s:LinearGradient>
			</s:fill>
		</s:Ellipse>
		<components:AutoComplete verticalCenter="0" horizontalCenter="0" width="260" 
		 id="searchInput" showEffect="{fadeIn}" alpha.search="1" alpha.notfound="0"
		 enter="searchInput_enterHandler(event)" includeIn="search" visible="false" 
		 labelField="name" creationComplete="this.setFocus();searchInput.inputTxt.prompt='Search for a client...'" />
		
		<s:VGroup id="errorMessageHolder"  horizontalCenter="0" verticalCenter="120" 
				  gap="12" showEffect="{fadeIn}" includeIn="notfound" alpha="0" alpha.notfound="1">
			<s:Label text="I'm sorry, that client is not in the database." styleName="errorText"/>
			<s:HGroup>
				<s:Button label="Redo Search" styleName="searchErrorButton" click="returnToSeach()" />
				<s:Button label="Create New Client" styleName="searchErrorButton" click="handleNewClient()" />
			</s:HGroup>
		</s:VGroup>
	</s:Group>
	
	<fx:Declarations>
		<s:Fade alphaTo="1" alphaFrom="0" duration="500" id="fadeIn" />	
		<s:Fade alphaTo="1" duration="500" id="fadeIn2" target="{questionMark}" />	
		<s:Power exponent="0.5" id="easeOutExpo2" />
		<s:Power exponent="3" id="easeOutExpo"/>
	</fx:Declarations>
</s:Group>
